<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cosmos åŒºå—é“¾æµè§ˆå™¨</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            background: rgba(255, 255, 255, 0.9);
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 20px;
            text-align: center;
            backdrop-filter: blur(10px);
        }

        .header h1 {
            color: #4a5568;
            margin-bottom: 10px;
        }

        .status-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .status-card {
            background: rgba(255, 255, 255, 0.9);
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            backdrop-filter: blur(10px);
        }

        .status-card h3 {
            color: #667eea;
            margin-bottom: 10px;
        }

        .status-card .value {
            font-size: 24px;
            font-weight: bold;
            color: #2d3748;
        }

        .tabs {
            display: flex;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 10px;
            margin-bottom: 20px;
            overflow: hidden;
        }

        .tab {
            flex: 1;
            padding: 15px;
            background: none;
            border: none;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s;
        }

        .tab.active {
            background: #667eea;
            color: white;
        }

        .tab:hover {
            background: rgba(102, 126, 234, 0.1);
        }

        .tab.active:hover {
            background: #667eea;
        }

        .tab-content {
            background: rgba(255, 255, 255, 0.95);
            padding: 20px;
            border-radius: 15px;
            backdrop-filter: blur(10px);
            min-height: 400px;
        }

        .tab-panel {
            display: none;
        }

        .tab-panel.active {
            display: block;
        }

        .blocks-list {
            max-height: 600px;
            overflow-y: auto;
        }

        .block-item {
            background: linear-gradient(135deg, #f7fafc, #edf2f7);
            margin: 10px 0;
            padding: 15px;
            border-radius: 10px;
            border-left: 4px solid #667eea;
        }

        .block-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .block-height {
            font-size: 18px;
            font-weight: bold;
            color: #667eea;
        }

        .block-time {
            color: #718096;
            font-size: 14px;
        }

        .block-info {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 10px;
            font-size: 14px;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: #4a5568;
        }

        .form-group input, .form-group select {
            width: 100%;
            padding: 10px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 14px;
            transition: border-color 0.3s;
        }

        .form-group input:focus, .form-group select:focus {
            outline: none;
            border-color: #667eea;
        }

        .btn {
            background: #667eea;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s;
            margin-right: 10px;
            margin-bottom: 10px;
        }

        .btn:hover {
            background: #5a67d8;
            transform: translateY(-2px);
        }

        .btn.secondary {
            background: #48bb78;
        }

        .btn.secondary:hover {
            background: #38a169;
        }

        .btn.danger {
            background: #f56565;
        }

        .btn.danger:hover {
            background: #e53e3e;
        }

        .result {
            margin-top: 15px;
            padding: 15px;
            border-radius: 8px;
            font-size: 14px;
        }

        .result.success {
            background: #f0fff4;
            border: 1px solid #9ae6b4;
            color: #276749;
        }

        .result.error {
            background: #fed7d7;
            border: 1px solid #feb2b2;
            color: #c53030;
        }

        .validators-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 15px;
        }

        .validator-card {
            background: linear-gradient(135deg, #f7fafc, #edf2f7);
            padding: 15px;
            border-radius: 10px;
            border-left: 4px solid #48bb78;
        }

        .validator-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .validator-status {
            background: #48bb78;
            color: white;
            padding: 4px 8px;
            border-radius: 20px;
            font-size: 12px;
        }

        .hash {
            font-family: 'Courier New', monospace;
            font-size: 12px;
            color: #666;
            word-break: break-all;
        }

        .loading {
            text-align: center;
            padding: 40px;
            color: #718096;
        }

        .auto-mine-status {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
        }

        .status-indicator {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: #f56565;
        }

        .status-indicator.active {
            background: #48bb78;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- å¤´éƒ¨çŠ¶æ€ -->
        <div class="header">
            <h1>ğŸŒŸ Cosmos åŒºå—é“¾æµè§ˆå™¨</h1>
            <p>åŸºäº Cosmos JS SDK çš„åŒºå—é“¾æ¼”ç¤ºç³»ç»Ÿ</p>
            
            <div class="status-grid" id="statusGrid">
                <div class="status-card">
                    <h3>å½“å‰é«˜åº¦</h3>
                    <div class="value" id="currentHeight">-</div>
                </div>
                <div class="status-card">
                    <h3>æ€»åŒºå—æ•°</h3>
                    <div class="value" id="totalBlocks">-</div>
                </div>
                <div class="status-card">
                    <h3>ä»£å¸æ€»ä¾›åº”é‡</h3>
                    <div class="value" id="totalSupply">-</div>
                </div>
                <div class="status-card">
                    <h3>æ´»è·ƒéªŒè¯è€…</h3>
                    <div class="value" id="activeValidators">-</div>
                </div>
                <div class="status-card">
                    <h3>æ€»ç”¨æˆ·æ•°</h3>
                    <div class="value" id="totalUsers">-</div>
                </div>
            </div>
        </div>

        <!-- æ ‡ç­¾é¡µ -->
        <div class="tabs">
            <button class="tab active" onclick="showTab('blocks')">ğŸ“¦ åŒºå—æµè§ˆ</button>
            <button class="tab" onclick="showTab('users')">ğŸ‘¥ ç”¨æˆ·ç®¡ç†</button>
            <button class="tab" onclick="showTab('transfer')">ğŸ’¸ ä»£å¸è½¬è´¦</button>
            <button class="tab" onclick="showTab('mining')">â›ï¸ æŒ–çŸ¿ç®¡ç†</button>
            <button class="tab" onclick="showTab('validators')">ğŸ›¡ï¸ éªŒè¯è€…</button>
        </div>

        <div class="tab-content">
            <!-- åŒºå—æµè§ˆ -->
            <div class="tab-panel active" id="blocks">
                <h2>æœ€æ–°åŒºå—</h2>
                <div id="blocksList" class="blocks-list">
                    <div class="loading">åŠ è½½ä¸­...</div>
                </div>
            </div>

            <!-- ç”¨æˆ·ç®¡ç† -->
            <div class="tab-panel" id="users">
                <h2>ç”¨æˆ·ç®¡ç†</h2>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                    <div>
                        <h3>åˆ›å»ºæ–°ç”¨æˆ·</h3>
                        <div class="form-group">
                            <label for="newUsername">ç”¨æˆ·å</label>
                            <input type="text" id="newUsername" placeholder="è¾“å…¥ç”¨æˆ·å">
                        </div>
                        <button class="btn" onclick="createUser()">åˆ›å»ºç”¨æˆ·</button>
                    </div>

                    <div>
                        <h3>æŸ¥è¯¢ç”¨æˆ·</h3>
                        <div class="form-group">
                            <label for="queryUsername">ç”¨æˆ·å</label>
                            <input type="text" id="queryUsername" placeholder="è¾“å…¥è¦æŸ¥è¯¢çš„ç”¨æˆ·å">
                        </div>
                        <button class="btn secondary" onclick="queryUser()">æŸ¥è¯¢ç”¨æˆ·</button>
                    </div>
                </div>

                <div id="userResult" class="result" style="display: none;"></div>
            </div>

            <!-- ä»£å¸è½¬è´¦ -->
            <div class="tab-panel" id="transfer">
                <h2>ä»£å¸è½¬è´¦</h2>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                    <div>
                        <h3>è½¬è´¦</h3>
                        <div class="form-group">
                            <label for="fromUser">å‘é€è€…ç”¨æˆ·å</label>
                            <input type="text" id="fromUser" placeholder="å‘é€è€…ç”¨æˆ·å">
                        </div>
                        <div class="form-group">
                            <label for="toAddress">æ¥æ”¶è€…åœ°å€</label>
                            <input type="text" id="toAddress" placeholder="æ¥æ”¶è€…åœ°å€">
                        </div>
                        <div class="form-group">
                            <label for="transferAmount">è½¬è´¦æ•°é‡</label>
                            <input type="number" id="transferAmount" placeholder="è½¬è´¦æ•°é‡">
                        </div>
                        <button class="btn" onclick="transferTokens()">å‘èµ·è½¬è´¦</button>
                    </div>

                    <div>
                        <h3>é“¸é€ ä»£å¸</h3>
                        <div class="form-group">
                            <label for="mintToAddress">æ¥æ”¶åœ°å€</label>
                            <input type="text" id="mintToAddress" placeholder="æ¥æ”¶åœ°å€">
                        </div>
                        <div class="form-group">
                            <label for="mintAmount">é“¸é€ æ•°é‡</label>
                            <input type="number" id="mintAmount" placeholder="é“¸é€ æ•°é‡">
                        </div>
                        <div class="form-group">
                            <label for="mintReason">é“¸é€ åŸå› </label>
                            <input type="text" id="mintReason" placeholder="é“¸é€ åŸå› " value="ç®¡ç†å‘˜é“¸é€ ">
                        </div>
                        <button class="btn secondary" onclick="mintTokens()">é“¸é€ ä»£å¸</button>
                    </div>
                </div>

                <div id="transferResult" class="result" style="display: none;"></div>
            </div>

            <!-- æŒ–çŸ¿ç®¡ç† -->
            <div class="tab-panel" id="mining">
                <h2>æŒ–çŸ¿ç®¡ç†</h2>
                
                <div class="auto-mine-status">
                    <div class="status-indicator" id="miningIndicator"></div>
                    <span id="miningStatus">è‡ªåŠ¨æŒ–çŸ¿å·²åœæ­¢</span>
                </div>

                <button class="btn" onclick="startAutoMining()">å¼€å§‹è‡ªåŠ¨æŒ–çŸ¿</button>
                <button class="btn danger" onclick="stopAutoMining()">åœæ­¢è‡ªåŠ¨æŒ–çŸ¿</button>
                <button class="btn secondary" onclick="mineOneBlock()">æŒ–ä¸€ä¸ªåŒºå—</button>

                <div id="miningResult" class="result" style="display: none;"></div>
            </div>

            <!-- éªŒè¯è€… -->
            <div class="tab-panel" id="validators">
                <h2>éªŒè¯è€…ç®¡ç†</h2>
                
                <div style="margin-bottom: 20px;">
                    <h3>æ·»åŠ éªŒè¯è€…</h3>
                    <div style="display: grid; grid-template-columns: 2fr 1fr auto; gap: 10px; align-items: end;">
                        <div class="form-group">
                            <label for="validatorUsername">ç”¨æˆ·å</label>
                            <input type="text" id="validatorUsername" placeholder="è¦æˆä¸ºéªŒè¯è€…çš„ç”¨æˆ·å">
                        </div>
                        <div class="form-group">
                            <label for="validatorStake">è´¨æŠ¼æ•°é‡</label>
                            <input type="number" id="validatorStake" placeholder="1000" value="1000">
                        </div>
                        <button class="btn" onclick="addValidator()">æ·»åŠ éªŒè¯è€…</button>
                    </div>
                </div>

                <h3>å½“å‰éªŒè¯è€…</h3>
                <div id="validatorsList" class="validators-grid">
                    <div class="loading">åŠ è½½ä¸­...</div>
                </div>

                <div id="validatorResult" class="result" style="display: none;"></div>
            </div>
        </div>
    </div>

    <script>
        let autoMiningActive = false;

        // æ˜¾ç¤ºæ ‡ç­¾é¡µ
        function showTab(tabName) {
            // éšè—æ‰€æœ‰æ ‡ç­¾é¡µ
            document.querySelectorAll('.tab-panel').forEach(panel => {
                panel.classList.remove('active');
            });
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });

            // æ˜¾ç¤ºé€‰ä¸­çš„æ ‡ç­¾é¡µ
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');

            // åŠ è½½å¯¹åº”æ•°æ®
            if (tabName === 'blocks') loadBlocks();
            if (tabName === 'validators') loadValidators();
        }

        // åŠ è½½åŒºå—é“¾çŠ¶æ€
        async function loadStatus() {
            try {
                const response = await fetch('/api/status');
                const status = await response.json();

                document.getElementById('currentHeight').textContent = status.latestHeight;
                document.getElementById('totalBlocks').textContent = status.totalBlocks;
                document.getElementById('totalSupply').textContent = status.totalSupply.toLocaleString();
                document.getElementById('activeValidators').textContent = status.activeValidators;
                document.getElementById('totalUsers').textContent = status.totalUsers;
            } catch (error) {
                console.error('åŠ è½½çŠ¶æ€å¤±è´¥:', error);
            }
        }

        // åŠ è½½åŒºå—åˆ—è¡¨
        async function loadBlocks() {
            try {
                const response = await fetch('/api/blocks');
                const blocks = await response.json();

                const blocksList = document.getElementById('blocksList');
                if (blocks.length === 0) {
                    blocksList.innerHTML = '<div class="loading">æš‚æ— åŒºå—</div>';
                    return;
                }

                blocksList.innerHTML = blocks.map(block => `
                    <div class="block-item">
                        <div class="block-header">
                            <div class="block-height">åŒºå— #${block.height}</div>
                            <div class="block-time">${new Date(block.timestamp).toLocaleString()}</div>
                        </div>
                        <div class="block-info">
                            <div><strong>å“ˆå¸Œ:</strong> <span class="hash">${block.hash}</span></div>
                            <div><strong>éªŒè¯è€…:</strong> ${block.validator}</div>
                            <div><strong>äº¤æ˜“æ•°:</strong> ${block.transactionCount}</div>
                            <div><strong>Gasä½¿ç”¨:</strong> ${block.gasUsed}/${block.gasLimit}</div>
                        </div>
                    </div>
                `).join('');
            } catch (error) {
                console.error('åŠ è½½åŒºå—å¤±è´¥:', error);
                document.getElementById('blocksList').innerHTML = '<div class="loading">åŠ è½½å¤±è´¥</div>';
            }
        }

        // åˆ›å»ºç”¨æˆ·
        async function createUser() {
            const username = document.getElementById('newUsername').value.trim();
            if (!username) {
                showResult('userResult', 'è¯·è¾“å…¥ç”¨æˆ·å', 'error');
                return;
            }

            try {
                const response = await fetch('/api/user', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ username })
                });

                const result = await response.json();
                if (result.success) {
                    showResult('userResult', `
                        ç”¨æˆ·åˆ›å»ºæˆåŠŸï¼<br>
                        ç”¨æˆ·å: ${result.user.username}<br>
                        åœ°å€: ${result.user.address}<br>
                        åŠ©è®°è¯: ${result.user.mnemonic}
                    `, 'success');
                    document.getElementById('newUsername').value = '';
                    loadStatus();
                } else {
                    showResult('userResult', result.error, 'error');
                }
            } catch (error) {
                showResult('userResult', 'åˆ›å»ºç”¨æˆ·å¤±è´¥: ' + error.message, 'error');
            }
        }

        // æŸ¥è¯¢ç”¨æˆ·
        async function queryUser() {
            const username = document.getElementById('queryUsername').value.trim();
            if (!username) {
                showResult('userResult', 'è¯·è¾“å…¥ç”¨æˆ·å', 'error');
                return;
            }

            try {
                const response = await fetch(`/api/user/${username}`);
                if (response.ok) {
                    const user = await response.json();
                    showResult('userResult', `
                        ç”¨æˆ·ä¿¡æ¯:<br>
                        ç”¨æˆ·å: ${user.username}<br>
                        åœ°å€: ${user.address}<br>
                        ä½™é¢: ${user.balance} ä»£å¸<br>
                        åˆ›å»ºæ—¶é—´: ${new Date(user.created).toLocaleString()}
                    `, 'success');
                } else {
                    showResult('userResult', 'ç”¨æˆ·ä¸å­˜åœ¨', 'error');
                }
            } catch (error) {
                showResult('userResult', 'æŸ¥è¯¢å¤±è´¥: ' + error.message, 'error');
            }
        }

        // è½¬è´¦
        async function transferTokens() {
            const fromUsername = document.getElementById('fromUser').value.trim();
            const toAddress = document.getElementById('toAddress').value.trim();
            const amount = parseInt(document.getElementById('transferAmount').value);

            if (!fromUsername || !toAddress || !amount) {
                showResult('transferResult', 'è¯·å¡«å†™å®Œæ•´ä¿¡æ¯', 'error');
                return;
            }

            try {
                const response = await fetch('/api/transfer', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ fromUsername, toAddress, amount })
                });

                const result = await response.json();
                if (result.success) {
                    showResult('transferResult', `
                        è½¬è´¦æˆåŠŸï¼<br>
                        äº¤æ˜“å“ˆå¸Œ: ${result.transaction.txHash}<br>
                        ä»: ${result.transaction.from}<br>
                        åˆ°: ${result.transaction.to}<br>
                        æ•°é‡: ${result.transaction.amount} ä»£å¸
                    `, 'success');
                    document.getElementById('fromUser').value = '';
                    document.getElementById('toAddress').value = '';
                    document.getElementById('transferAmount').value = '';
                    loadStatus();
                } else {
                    showResult('transferResult', result.error, 'error');
                }
            } catch (error) {
                showResult('transferResult', 'è½¬è´¦å¤±è´¥: ' + error.message, 'error');
            }
        }

        // é“¸é€ ä»£å¸
        async function mintTokens() {
            const toAddress = document.getElementById('mintToAddress').value.trim();
            const amount = parseInt(document.getElementById('mintAmount').value);
            const reason = document.getElementById('mintReason').value.trim();

            if (!toAddress || !amount) {
                showResult('transferResult', 'è¯·å¡«å†™å®Œæ•´ä¿¡æ¯', 'error');
                return;
            }

            try {
                const response = await fetch('/api/mint', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ toAddress, amount, reason })
                });

                const result = await response.json();
                if (result.success) {
                    showResult('transferResult', `
                        ä»£å¸é“¸é€ æˆåŠŸï¼<br>
                        æ¥æ”¶åœ°å€: ${result.transaction.to}<br>
                        é“¸é€ æ•°é‡: ${result.transaction.amount} ä»£å¸<br>
                        åŸå› : ${result.transaction.reason}
                    `, 'success');
                    document.getElementById('mintToAddress').value = '';
                    document.getElementById('mintAmount').value = '';
                    loadStatus();
                } else {
                    showResult('transferResult', result.error, 'error');
                }
            } catch (error) {
                showResult('transferResult', 'é“¸é€ å¤±è´¥: ' + error.message, 'error');
            }
        }

        // å¼€å§‹è‡ªåŠ¨æŒ–çŸ¿
        async function startAutoMining() {
            try {
                const response = await fetch('/api/auto-mine/start', { method: 'POST' });
                const result = await response.json();
                if (result.success) {
                    autoMiningActive = true;
                    updateMiningStatus();
                    showResult('miningResult', 'è‡ªåŠ¨æŒ–çŸ¿å·²å¯åŠ¨', 'success');
                }
            } catch (error) {
                showResult('miningResult', 'å¯åŠ¨å¤±è´¥: ' + error.message, 'error');
            }
        }

        // åœæ­¢è‡ªåŠ¨æŒ–çŸ¿
        async function stopAutoMining() {
            try {
                const response = await fetch('/api/auto-mine/stop', { method: 'POST' });
                const result = await response.json();
                if (result.success) {
                    autoMiningActive = false;
                    updateMiningStatus();
                    showResult('miningResult', 'è‡ªåŠ¨æŒ–çŸ¿å·²åœæ­¢', 'success');
                }
            } catch (error) {
                showResult('miningResult', 'åœæ­¢å¤±è´¥: ' + error.message, 'error');
            }
        }

        // æŒ–ä¸€ä¸ªåŒºå—
        async function mineOneBlock() {
            try {
                const response = await fetch('/api/mine', { method: 'POST' });
                const result = await response.json();
                if (result.success) {
                    showResult('miningResult', `
                        åŒºå—æŒ–çŸ¿æˆåŠŸï¼<br>
                        åŒºå—é«˜åº¦: ${result.block.height}<br>
                        åŒºå—å“ˆå¸Œ: ${result.block.hash}<br>
                        éªŒè¯è€…: ${result.block.validator}
                    `, 'success');
                    loadStatus();
                    if (document.getElementById('blocks').classList.contains('active')) {
                        loadBlocks();
                    }
                }
            } catch (error) {
                showResult('miningResult', 'æŒ–çŸ¿å¤±è´¥: ' + error.message, 'error');
            }
        }

        // æ·»åŠ éªŒè¯è€…
        async function addValidator() {
            const username = document.getElementById('validatorUsername').value.trim();
            const stake = parseInt(document.getElementById('validatorStake').value) || 1000;

            if (!username) {
                showResult('validatorResult', 'è¯·è¾“å…¥ç”¨æˆ·å', 'error');
                return;
            }

            try {
                const response = await fetch('/api/validator', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ username, stake })
                });

                const result = await response.json();
                if (result.success) {
                    showResult('validatorResult', `
                        éªŒè¯è€…æ·»åŠ æˆåŠŸï¼<br>
                        ç”¨æˆ·: ${result.validator.username}<br>
                        åœ°å€: ${result.validator.address}<br>
                        è´¨æŠ¼: ${result.validator.stake} ä»£å¸
                    `, 'success');
                    document.getElementById('validatorUsername').value = '';
                    document.getElementById('validatorStake').value = '1000';
                    loadValidators();
                    loadStatus();
                } else {
                    showResult('validatorResult', result.error, 'error');
                }
            } catch (error) {
                showResult('validatorResult', 'æ·»åŠ å¤±è´¥: ' + error.message, 'error');
            }
        }

        // åŠ è½½éªŒè¯è€…åˆ—è¡¨
        async function loadValidators() {
            try {
                const response = await fetch('/api/validators');
                const validators = await response.json();

                const validatorsList = document.getElementById('validatorsList');
                if (validators.length === 0) {
                    validatorsList.innerHTML = '<div class="loading">æš‚æ— éªŒè¯è€…</div>';
                    return;
                }

                validatorsList.innerHTML = validators.map(validator => `
                    <div class="validator-card">
                        <div class="validator-header">
                            <div><strong>${validator.username}</strong></div>
                            <div class="validator-status">${validator.status}</div>
                        </div>
                        <div><strong>åœ°å€:</strong> <span class="hash">${validator.address}</span></div>
                        <div><strong>è´¨æŠ¼:</strong> ${validator.stake} ä»£å¸</div>
                        <div><strong>æŠ•ç¥¨æƒé‡:</strong> ${validator.power}</div>
                        <div><strong>æè®®åŒºå—:</strong> ${validator.blocks_proposed}</div>
                        <div><strong>è·å¾—å¥–åŠ±:</strong> ${validator.rewards_earned}</div>
                        <div><strong>åŠ å…¥æ—¶é—´:</strong> ${new Date(validator.joined).toLocaleString()}</div>
                    </div>
                `).join('');
            } catch (error) {
                console.error('åŠ è½½éªŒè¯è€…å¤±è´¥:', error);
                document.getElementById('validatorsList').innerHTML = '<div class="loading">åŠ è½½å¤±è´¥</div>';
            }
        }

        // æ›´æ–°æŒ–çŸ¿çŠ¶æ€
        function updateMiningStatus() {
            const indicator = document.getElementById('miningIndicator');
            const status = document.getElementById('miningStatus');
            
            if (autoMiningActive) {
                indicator.classList.add('active');
                status.textContent = 'è‡ªåŠ¨æŒ–çŸ¿è¿è¡Œä¸­';
            } else {
                indicator.classList.remove('active');
                status.textContent = 'è‡ªåŠ¨æŒ–çŸ¿å·²åœæ­¢';
            }
        }

        // æ˜¾ç¤ºç»“æœ
        function showResult(elementId, message, type) {
            const element = document.getElementById(elementId);
            element.innerHTML = message;
            element.className = `result ${type}`;
            element.style.display = 'block';
            
            setTimeout(() => {
                element.style.display = 'none';
            }, 5000);
        }

        // é¡µé¢åŠ è½½å®Œæˆåçš„åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            loadStatus();
            loadBlocks();
            
            // æ¯30ç§’è‡ªåŠ¨åˆ·æ–°çŠ¶æ€
            setInterval(loadStatus, 30000);
            
            // å¦‚æœåœ¨åŒºå—é¡µé¢ï¼Œæ¯30ç§’åˆ·æ–°åŒºå—åˆ—è¡¨
            setInterval(() => {
                if (document.getElementById('blocks').classList.contains('active')) {
                    loadBlocks();
                }
            }, 30000);
        });
    </script>
</body>
</html>